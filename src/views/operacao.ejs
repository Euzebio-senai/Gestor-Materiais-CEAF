<%- include('partials/header') %>

<body>
  <%- include('partials/navbar', { userName: "Utilizador" }) %>

  <div class="container">
    <div class="page-header">
      <h1 class="page-title"><%= title %></h1>
      <a href="/" class="btn btn-secondary">Voltar ao Dashboard</a>
    </div>

    <div class="operation-container">
      
      <div class="card">
        <h3 class="card-title">Adicionar Item à Lista</h3>
        
        <div class="form-group">
          <label>Procurar Item (Nome ou ID)</label>
          <div class="input-group">
            <input type="text" id="product-search" placeholder="Ex: Resma A4...">
            <button class="btn btn-info" id="btn-search">Procurar</button>
          </div>
        </div>
        
        <div class="selected-product" id="selected-product-label">
          Nenhum item selecionado
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="quantity">Quantidade</label>
            <input type="number" id="quantity" value="1">
          </div>
          <button class="btn btn-success" id="btn-add-item">Adicionar à Lista</button>
        </div>
      </div>

      <div class="card">
        <h3 class="card-title">Itens para Registar</h3>
        
        <div class="table-container">
          <table class="items-table" id="items-list-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Item</th>
                <th>Quantidade</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody>
              <tr class="empty-state">
                <td colspan="4">A lista está vazia.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <form action="/operacao" method="POST" class="card">
        <% if (tipo === 'saida') { %>
          <div class="form-group">
            <label for="retirante">Nome do Retirante</label>
            <input type="text" id="retirante" name="retirante" required>
          </div>
        <% } %>

        <input type="hidden" name="tipo_operacao" value="<%= tipo %>">
        
        <div class="action-bar">
          <div class="flex-grow">
            </div>
          <button type="submit" class="btn btn-primary btn-large">
            Registar <%= tipo.charAt(0).toUpperCase() + tipo.slice(1) %>
          </button>
        </div>
      </form>

    </div>
  </div>

  <%- include('partials/footer') %>